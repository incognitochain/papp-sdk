!function(n,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports.pappSdk=e():n.pappSdk=e()}(this,(function(){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"===typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=1)}([function(n,e){function t(n){return(t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function r(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var o=function(){function n(e,t){if(function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),!e&&"string"!==typeof e)throw new Error("Missing or invalid label");this.value=t,this.label=e,this.isRequired=!1}var e,o,i;return e=n,(o=[{key:"_throwError",value:function(n){throw new Error('Validating "'.concat(this.label,'" failed: ').concat(n,". Found ").concat(JSON.stringify(this.value)," (type of ").concat(t(this.value),")"))}},{key:"_isDefined",value:function(){return null!==this.value&&void 0!==this.value}},{key:"_onCondition",value:function(n,e){return(!this.isRequired&&this._isDefined()||this.isRequired)&&!n()&&this._throwError(e),this}},{key:"required",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Required";return this.isRequired=!0,this._onCondition((function(){return n._isDefined()}),e)}},{key:"string",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be a string";return this._onCondition((function(){return"string"===typeof n.value}),e)}},{key:"boolean",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be a boolean";return this._onCondition((function(){return"boolean"===typeof n.value}),e)}},{key:"function",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be a function";return this._onCondition((function(){return"function"===typeof n.value}),e)}},{key:"object",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be an object";return this._onCondition((function(){return"object"===t(n.value)&&null!==n.value}),e)}},{key:"array",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be an array";return this._onCondition((function(){return n.value instanceof Array}),e)}},{key:"number",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be a valid number and larger than 0";return this._onCondition((function(){return Number.isFinite(n.value)&&n.value>=0}),e)}},{key:"intergerNumber",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Must be a valid interger number and larger than 0";return this._onCondition((function(){return Number.isInteger(n.value)&&n.value>=0}),e)}},{key:"paymentAddress",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid payment address";return this._onCondition((function(){return n.string()}),e)}},{key:"nanoAmount",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid nano amount";return this._onCondition((function(){return n.intergerNumber()}),e)}},{key:"amount",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid amount";return this._onCondition((function(){return n.number()}),e)}},{key:"inList",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Must be in provided list";return new n("list",e).required().array(),r="Must be one of ".concat(JSON.stringify(e)),this._onCondition((function(){return e.includes(t.value)}),r)}}])&&r(e.prototype,o),i&&r(e,i),n}();n.exports=o},function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r);var i=function(){var n;(n=console).debug.apply(n,arguments)},a={TOKEN_INFO:"token_info",PAYMENT_ADDRESS:"payment_andress",TX_PENDING_RESULT:"tx_pending_result",LIST_TOKEN:"list_token"},u={SEND_TX:"send_tx",SELECT_PRIVACY_TOKEN_BY_ID:"select_privacy_token_by_id"};function s(n){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function c(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var d,f=function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.simple,i=void 0!==r&&r;if(c(this,n),"object"!==s(e))throw TypeError("Token info must be an object, found ".concat(JSON.stringify(e)));var a=e.name,u=e.symbol,d=e.id,f=e.pDecimals,l=e.balance,p=e.nanoBalance;new o.a("id",d).required().string(),new o.a("name",a).required().string(),new o.a("symbol",u).required().string();var y=new o.a("pDecimals",f).intergerNumber(),v=new o.a("balance",l).amount(),b=new o.a("nanoBalance",p).nanoAmount();i||(y.required(),v.required(),b.required()),this.id=d,this.name=a,this.symbol=u,this.pDecimals=f,this.balance=l,this.nanoBalance=p},l={paymentAddress:"",tokenInfo:{},supportedTokenList:[]},p={};function y(n,e){new o.a("listener key",n).required().string().inList(Object.values(a)),new o.a("listener callback",e).required().function(),p[n]=e,i("[LISTENER CHANGES]",n)}function v(){return new Proxy(l,{set:function(n,e,t){var r,u,s,c,d;switch(e){case"paymentAddress":if(new o.a("paymentAddress",t).required().paymentAddress(),(r=t)===n[e])return!0;u=p[a.PAYMENT_ADDRESS];break;case"tokenInfo":if(new o.a("tokenInfo",t).required(),r=new f(t),s=r,c=n[e],s=s||{},c=c||{},(d=["name","symbol","id","pDecimals","balance","nanoBalance"])&&d.every((function(n){return s[n]===c[n]})))return!0;u=p[a.TOKEN_INFO];break;case"supportedTokenList":if(!(t instanceof Array))throw new TypeError("supportedTokenList must be an array, found ".concat(JSON.stringify(t)));if(((r=t.map((function(n){return new f(n,{simple:!0})})))&&r.length)===(n[e]&&n[e].length))return!0;u=p[a.LIST_TOKEN]}return n[e]=r,i("[STORE CHANGES]",e,"=",r),"function"===typeof u&&u(r),!0}})}function b(){return d||(d=v()),d}var _={},h=b();function m(n,e){new o.a("__sendCommand command",n).required().string(),new o.a("__sendCommand data",e).object(),new o.a("window.ReactNativeWebView.postMessage",window.ReactNativeWebView.postMessage).required().function();var t="".concat(n,"|").concat(JSON.stringify(e));t?(window.ReactNativeWebView.postMessage(t),i("[SEND COMMAND]",n,e)):function(){var n;(n=console).error.apply(n,arguments)}("[SEND COMMAND] failed",n,e)}function E(n,e){switch(n){case a.TOKEN_INFO:h.tokenInfo=e;break;case a.PAYMENT_ADDRESS:h.paymentAddress=e;break;case a.TX_PENDING_RESULT:e.pendingTxId&&_[e.pendingTxId]&&(e.data&&_[e.pendingTxId].resolve(e.data),e.error&&_[e.pendingTxId].reject(e.error),delete _[e.pendingTxId]);break;case a.LIST_TOKEN:h.supportedTokenList=e;break;default:return}}window&&!window.pappSdk&&(window.pappSdk={_setData:E});e.default={checkSDKCompatible:function(){return!("undefined"===typeof window||!window.ReactNativeWebView||!window.ReactNativeWebView)},onPaymentAddressChange:function(n){y(a.PAYMENT_ADDRESS,n)},onSupportedTokenListChange:function(n){y(a.LIST_TOKEN,n)},onTokenInfoChange:function(n){y(a.TOKEN_INFO,n)},changePrivacyTokenById:function(n){new o.a("tokenID",n).required().string(),m(u.SELECT_PRIVACY_TOKEN_BY_ID,{tokenID:n})},requestSendTx:function(n,e,t){new o.a("toAddress",n).required().paymentAddress(),new o.a("nanoAmount",e).required().nanoAmount(),new o.a("info",t).string();var r=function n(e){new o.a("_id",e).string();var t=e||Date.now();if(_[t]&&(t=n(t+1)),!t)throw new Error("Can not generate ID for sending TX");return String(t)}();return new Promise((function(o,i){m(u.SEND_TX,{pendingTxId:r,toAddress:n,amount:e,info:t}),_[r]={resolve:o,reject:i}}))},getStore:b,resetStore:function(){d=v()},Validator:o.a,DATA_NAMES:a,COMMANDS:u,ERROR_CODE:{SEND_REQUEST_CANCELED:"SEND_REQUEST_CANCELED",REQUEST_SEND_TX_TIMEOUT:"REQUEST_SEND_TX_TIMEOUT",SEND_TX_ERROR:"SEND_TX_ERROR",USER_CANCEL_SEND_TX:"USER_CANCEL_SEND_TX"},sdkError:function(n,e){return{code:n,message:e}},_setData:E}}]).default}));